name: Github actions

on:
  push:

jobs:
  Build:
    name: ubuntu
    runs-on: ubuntu-latest
    container: ubuntu:22.04
    strategy:
      fail-fast: false
      matrix:
        cmake_ver: ["3.26.4", "3.27.7", "3.27.9", "3.28.3", "3.29.0"]

    steps:
    - uses: actions/checkout@v4
    - name: install packages
      run: |
        apt update
        apt install --no-install-recommends -y \
          gcc \
          gfortran \
          ninja-build \
          libopenblas-dev \
          python3-pip
        pip install cmake==${{ matrix.cmake_ver }}
    - name: Configuring
      run: |
        cmake \
          -GNinja \
          -DCMAKE_BUILD_TYPE=RelWithDebInfo \
          -B build \
          -S .
    - name: Building
      run: ninja -C build
